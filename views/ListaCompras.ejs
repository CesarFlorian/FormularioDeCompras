<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Lista de Compras</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: #f0f2f5;
      min-height: 100vh;
      padding-top: 80px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .navbar-custom {
      background: #343a40;
      color: white;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 10;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.2);
    }
    .btn-new {
      font-weight: 600;
      letter-spacing: 0.03em;
      transition: background-color 0.3s ease;
    }
    .btn-new:hover {
      background-color: #0069d9;
      color: white;
    }
    .card-compra {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      cursor: default;
    }
    .card-compra:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.12);
    }
    .actions button,
    .actions a {
      margin-right: 8px;
    }
    .no-compras {
      font-style: italic;
      color: #777;
    }
  </style>
</head>
<body>

  <nav class="navbar navbar-custom d-flex justify-content-between align-items-center px-4 py-3">
    <h2 class="mb-0">Lista de Compras</h2>
    <a href="/logout" class="btn btn-outline-light">
      <i class="bi bi-box-arrow-right"></i> Cerrar sesión
    </a>
  </nav>

  <main class="container my-4">

    <div class="text-center mb-4">
      <a href="/compras/nueva" class="btn btn-primary btn-lg btn-new">
        <i class="bi bi-plus-circle"></i> Nueva Compra
      </a>
    </div>

    <% if (compras.length === 0) { %>
      <p class="text-center no-compras">No hay compras registradas.</p>
    <% } else { %>
      <div class="row gy-3">
        <% compras.forEach(compra => { %>
          <div class="col-md-6 col-lg-4">
            <div class="card card-compra shadow-sm">
              <div class="card-body">
                <h5 class="card-title fw-semibold"><%= compra.producto %></h5>
                <p class="card-text mb-1"><strong>Cantidad:</strong> <%= compra.cantidad %></p>
                <p class="card-text mb-3"><strong>Precio:</strong> $<%= compra.precio.toFixed(2) %></p>
                <div class="actions">
                  <a href="/compras/editar/<%= compra._id %>" class="btn btn-sm btn-warning">
                    <i class="bi bi-pencil-square"></i> Editar
                  </a>
                  <form action="/compras/borrar/<%= compra._id %>" method="POST" class="d-inline">
                    <button
                      type="submit"
                      class="btn btn-sm btn-danger"
                      onclick="return confirm('¿Seguro que quieres borrar esta compra?');"
                    >
                      <i class="bi bi-trash"></i> Borrar
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>

  </main>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
